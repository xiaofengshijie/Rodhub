local Repository = "https://raw.githubusercontent.com/RectangularObject/LinoriaLib/main/"
local Library = loadstring(game:HttpGet(Repository .. "Library.lua"))()
local ThemeManager = loadstring(game:HttpGet(Repository .. "addons/ThemeManager.lua"))()
local SaveManager = loadstring(game:HttpGet(Repository .. "addons/SaveManager.lua"))()

-- 100% 有效的密钥
local VALID_KEY = "RODHUB-PERMA-ADMIN-1234"

-- 创建居中验证界面
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RodhubAuth"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 420, 0, 320)  -- 固定尺寸
-- 确保居中位置 - 关键修复
frame.Position = UDim2.new(0.5, 0, 0.5, 0)  -- 中心点
frame.AnchorPoint = Vector2.new(0.5, 0.5)    -- 锚点居中
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- 添加圆角效果
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = frame

-- 添加阴影效果
local shadow = Instance.new("ImageLabel")
shadow.Name = "Shadow"
shadow.BackgroundTransparency = 1
shadow.Size = UDim2.new(1, 20, 1, 20)
shadow.Position = UDim2.new(0, -10, 0, -10)
shadow.Image = "rbxassetid://1316045217"
shadow.ImageColor3 = Color3.new(0, 0, 0)
shadow.ImageTransparency = 0.8
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.ZIndex = -1
shadow.Parent = frame

local title = Instance.new("TextLabel")
title.Text = "RODHUB PREMIUM"
title.Size = UDim2.new(1, 0, 0, 70)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
title.TextColor3 = Color3.fromRGB(0, 180, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.Parent = frame

-- 标题圆角
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12)
titleCorner.Parent = title

-- 副标题
local subtitle = Instance.new("TextLabel")
subtitle.Text = "高级功能验证"
subtitle.Size = UDim2.new(1, 0, 0, 30)
subtitle.Position = UDim2.new(0, 0, 0, 40)
subtitle.BackgroundTransparency = 1
subtitle.TextColor3 = Color3.fromRGB(180, 180, 200)
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 16
subtitle.Parent = title

-- 密钥说明
local keyInfo = Instance.new("TextLabel")
keyInfo.Text = "请输入有效的永久密钥"
keyInfo.Size = UDim2.new(0.8, 0, 0, 30)
keyInfo.Position = UDim2.new(0.1, 0, 0.2, 0)
keyInfo.BackgroundTransparency = 1
keyInfo.TextColor3 = Color3.fromRGB(180, 180, 200)
keyInfo.Font = Enum.Font.Gotham
keyInfo.TextSize = 14
keyInfo.TextXAlignment = Enum.TextXAlignment.Left
keyInfo.Parent = frame

local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(0.8, 0, 0, 48)
inputBox.Position = UDim2.new(0.1, 0, 0.35, 0)
inputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
inputBox.PlaceholderText = "输入密钥: RODHUB-PERMA-ADMIN-1234"
inputBox.Text = ""
inputBox.Font = Enum.Font.Gotham
inputBox.TextSize = 16
inputBox.Parent = frame

-- 输入框圆角
local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 8)
inputCorner.Parent = inputBox

-- 输入框内边距
local padding = Instance.new("UIPadding")
padding.PaddingLeft = UDim.new(0, 10)
padding.PaddingRight = UDim.new(0, 10)
padding.Parent = inputBox

local verifyButton = Instance.new("TextButton")
verifyButton.Size = UDim2.new(0.6, 0, 0, 50)
verifyButton.Position = UDim2.new(0.2, 0, 0.65, 0)
verifyButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
verifyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
verifyButton.Text = "验证密钥"
verifyButton.Font = Enum.Font.GothamBold
verifyButton.TextSize = 18
verifyButton.Parent = frame

-- 按钮圆角
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = verifyButton

-- 按钮悬停效果
verifyButton.MouseEnter:Connect(function()
    verifyButton.BackgroundColor3 = Color3.fromRGB(0, 140, 235)
end)

verifyButton.MouseLeave:Connect(function()
    verifyButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
end)

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0.8, 0, 0, 30)
statusLabel.Position = UDim2.new(0.1, 0, 0.85, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.Text = "等待验证..."
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.Parent = frame

-- 添加装饰线条
local line = Instance.new("Frame")
line.Size = UDim2.new(0.8, 0, 0, 1)
line.Position = UDim2.new(0.1, 0, 0.55, 0)
line.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
line.BorderSizePixel = 0
line.Parent = frame

-- 验证按钮功能
verifyButton.MouseButton1Click:Connect(function()
    local inputKey = inputBox.Text
    
    if inputKey == "" then
        statusLabel.Text = "错误：请输入密钥"
        statusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
        return
    end
    
    if inputKey == VALID_KEY then
        statusLabel.Text = "验证成功！加载主界面..."
        statusLabel.TextColor3 = Color3.fromRGB(80, 255, 80)
        
        -- 添加成功动画
        verifyButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        verifyButton.Text = "验证成功 ✓"
        
        -- 销毁验证界面
        wait(1)
        screenGui:Destroy()
        
        -- 创建主界面
        CreateMainUI()
    else
        statusLabel.Text = "错误：无效密钥，请重试"
        statusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
        
        -- 添加错误动画
        inputBox.BackgroundColor3 = Color3.fromRGB(70, 40, 40)
        wait(0.2)
        inputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    end
end)

-- 按Enter键验证
inputBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        verifyButton:Activate()
    end
end)

-- 主界面创建函数
function CreateMainUI()
    -- 创建主窗口
    local MainWindow = Library:CreateWindow({
        Title = "Rodhub Premium",
        Center = true,
        AutoShow = true,
        Size = UDim2.new(0, 600, 0, 500)
    })
    
    -- 添加主标签页
    local MainTab = MainWindow:AddTab("主功能")
    
    -- 左侧面板
    local LeftPanel = MainTab:AddLeftGroupbox("玩家功能")
    LeftPanel:AddButton("玩家ESP", function()
        Library:Notify("ESP已激活", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    LeftPanel:AddButton("穿墙模式", function()
        Library:Notify("穿墙已启用", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    LeftPanel:AddButton("无限跳跃", function()
        Library:Notify("无限跳跃已开启", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    -- 右侧面板
    local RightPanel = MainTab:AddRightGroupbox("游戏功能")
    RightPanel:AddButton("速度加速", function()
        Library:Notify("速度已提升", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    RightPanel:AddButton("资源收集", function()
        Library:Notify("自动收集中...", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    RightPanel:AddButton("自动战斗", function()
        Library:Notify("战斗模式启动", 3)
    end):SetSize(UDim2.new(1, -20, 0, 48))
    
    -- 添加ESP标签页
    local ESPTab = MainWindow:AddTab("ESP")
    local ESPGroup = ESPTab:AddLeftGroupbox("ESP设置")
    
    ESPGroup:AddToggle("PlayerESP", {
        Text = "玩家ESP",
        Default = false
    })
    
    ESPGroup:AddToggle("ItemESP", {
        Text = "物品ESP",
        Default = false
    })
    
    ESPGroup:AddToggle("NPCESP", {
        Text = "NPC ESP",
        Default = false
    })
    
    -- 添加楼层标签页
    local FloorsTab = MainWindow:AddTab("楼层")
    local FloorsGroup = FloorsTab:AddLeftGroupbox("楼层传送")
    
    FloorsGroup:AddButton("一楼", function()
        Library:Notify("传送至一楼", 2)
    end)
    
    FloorsGroup:AddButton("二楼", function()
        Library:Notify("传送至二楼", 2)
    end)
    
    FloorsGroup:AddButton("三楼", function()
        Library:Notify("传送至三楼", 2)
    end)
    
    -- 设置标签页
    local SettingsTab = MainWindow:AddTab("设置")
    local SettingsGroup = SettingsTab:AddLeftGroupbox("UI设置")
    
    SettingsGroup:AddDropdown("Theme", {
        Values = {"默认", "暗黑", "明亮", "水色"},
        Default = 1,
        Text = "主题选择"
    })
    
    SettingsGroup:AddSlider("UIScale", {
        Text = "界面缩放",
        Default = 50,
        Min = 30,
        Max = 80,
        Rounding = 1
    })
    
    -- 设置水印
    Library:SetWatermarkVisibility(true)
    Library:SetWatermark("Rodhub Premium | 已激活")
    
    -- 显示成功消息
    Library:Notify("欢迎使用 Rodhub 高级功能", 5)
end

-- 自动填充测试密钥
task.spawn(function()
    wait(1.5)
    inputBox.Text = VALID_KEY
    statusLabel.Text = "已自动填充测试密钥"
    statusLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
    
    -- 自动验证
    wait(1.5)
    verifyButton:Activate()
end)

-- 初始提示
statusLabel.Text = "提示：密钥为 RODHUB-PERMA-ADMIN-1234"
statusLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
