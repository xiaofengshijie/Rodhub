local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")

local Window = Library.CreateLib("Rodhub ┃ "..Player.Name.." ┃ v3.2", {
    Theme = "Dark",
    Accent = Color3.fromRGB(255, 65, 65),
    Size = UDim2.new(0, 650, 0, 550)
})

local Tabs = {
    Main = Window:NewTab("🏠 主页"),
    Player = Window:NewTab("👤 玩家"),
    Combat = Window:NewTab("⚔️ 战斗"),
    Visuals = Window:NewTab("👁️ 视觉"),
    Doors = Window:NewTab("🚪 DOORS"),
    Settings = Window:NewTab("⚙️ 设置")
}

local HighlightColor = Color3.fromRGB(0, 150, 255)
local ESPObjects = {}

local MainSection = Tabs.Main:NewSection("🔧 核心功能")
local GodModeToggle = MainSection:NewToggle("上帝模式", "免疫所有伤害", function(state)
    if state then
        Player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
    else
        Player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, true)
    end
end)

local InfJumpToggle = MainSection:NewToggle("无限跳���", "取消跳跃冷却", function(state)
    getgenv().InfJump = state
end)

local WalkSpeedSlider = MainSection:NewSlider("移动速度", "调整行走速度", 200, 16, function(value)
    Player.Character.Humanoid.WalkSpeed = value
end)

local MovementSection = Tabs.Player:NewSection("🏃 移动增强")
local FlyToggle = MovementSection:NewToggle("飞行模式", "按住F键飞行", function(state)
    getgenv().Flying = state
    if state then
        FLY()
    end
end):AddKeybind(Enum.KeyCode.F)

local NoClipToggle = MovementSection:NewToggle("穿墙模式", "穿透所有物体", function(state)
    getgenv().NoClip = state
    if state then
        Player.Character.Humanoid:ChangeState(11)
    end
end):AddKeybind(Enum.KeyCode.N)

local VisualsESP = Tabs.Visuals:NewSection("🔵 蓝色ESP系统")
local ESPToggle = VisualsESP:NewToggle("启用蓝色ESP", "高亮所有重要对象", function(state)
    getgenv().BlueESP = state
    if state then
        EnableBlueESP()
    else
        DisableBlueESP()
    end
end)

local DoorsSurvival = Tabs.Doors:NewSection("🛡️ 生存系统")
local AutoHideToggle = DoorsSurvival:NewToggle("自动躲柜", "危险时自动寻找柜子", function(state)
    getgenv().AutoHide = state
end)

local DoorsESPToggle = Tabs.Doors:NewSection("🔵 DOORS ESP")
local DoorsHighlightToggle = DoorsESPToggle:NewToggle("高亮门和柜子", "蓝色高亮重要物体", function(state)
    getgenv().DoorsBlueESP = state
    if state then
        HighlightDoorsObjects()
    else
        RemoveDoorsHighlights()
    end
end)

function FLY()
    local CONTROLS = {F = 0, B = 0, L = 0, R = 0}
    local SPEED = 50

    local BG = Instance.new("BodyGyro")
    local BV = Instance.new("BodyVelocity")
    BG.P = 9e4
    BG.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    BG.cframe = Player.Character.HumanoidRootPart.CFrame
    BV.velocity = Vector3.new(0, 0, 0)
    BV.maxForce = Vector3.new(9e9, 9e9, 9e9)
    BG.Parent = Player.Character.HumanoidRootPart
    BV.Parent = Player.Character.HumanoidRootPart
    
    task.spawn(function()
        repeat task.wait()
            if CONTROLS.L + CONTROLS.R ~= 0 or CONTROLS.F + CONTROLS.B ~= 0 then
                SPEED = 50
            else
                SPEED = 0
            end
            
            BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROLS.F + CONTROLS.B)) + 
                          ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROLS.L + CONTROLS.R, (CONTROLS.F + CONTROLS.B) * 0.2, 0).p - 
                          workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
        until not getgenv().Flying
        BG:Destroy()
        BV:Destroy()
    end)
end

RunService.Stepped:Connect(function()
    if getgenv().NoClip and Player.Character then
        for _, part in pairs(Player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

game:GetService("UserInputService").JumpRequest:Connect(function()
    if getgenv().InfJump and Player.Character then
        Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

function EnableBlueESP()
    for _, player in pairs(game:GetService("Players"):GetPlayers()) do
        if player ~= Player then
            player.CharacterAdded:Connect(function(char)
                if getgenv().BlueESP then
                    AddHighlight(char, 0.5)
                end
            end)
            if player.Character then
                AddHighlight(player.Character, 0.5)
            end
        end
    end
    
    for _, item in pairs(workspace:GetDescendants()) do
        if item:IsA("BasePart") and (item.Name:find("Door") or item.Name:find("Chest") or item.Name:find("Item")) then
            AddHighlight(item, 0.3)
        end
    end
end

function HighlightDoorsObjects()
    if not workspace:FindFirstChild("CurrentRooms") then return end
    
    for _, room in pairs(workspace.CurrentRooms:GetChildren()) do
        if room:FindFirstChild("Door") then
            AddHighlight(room.Door, 0.2)
        end
        
        for _, obj in pairs(room:GetDescendants()) do
            if obj.Name:find("Closet") then
                AddHighlight(obj, 0.4)
            end
        end
        
        if room:FindFirstChild("Assets") then
            for _, entity in pairs(room.Assets:GetChildren()) do
                if entity:FindFirstChild("Humanoid") then
                    AddHighlight(entity, 0)
                end
            end
        end
    end
end

function AddHighlight(obj, transparency)
    if not obj or not obj:IsA("BasePart") then return end
    
    if obj:FindFirstChild("RodhubHighlight") then
        obj.RodhubHighlight:Destroy()
    end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "RodhubHighlight"
    highlight.FillColor = HighlightColor
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.FillTransparency = transparency
    highlight.Parent = obj
    
    table.insert(ESPObjects, highlight)
end

function DisableBlueESP()
    for _, obj in pairs(ESPObjects) do
        if obj and obj.Parent then
            obj:Destroy()
        end
    end
    ESPObjects = {}
end

function RemoveDoorsHighlights()
    if not workspace:FindFirstChild("CurrentRooms") then return end
    
    for _, room in pairs(workspace.CurrentRooms:GetChildren()) do
        if room:FindFirstChild("Door") and room.Door:FindFirstChild("RodhubHighlight") then
            room.Door.RodhubHighlight:Destroy()
        end
        
        for _, obj in pairs(room:GetDescendants()) do
            if obj:FindFirstChild("RodhubHighlight") then
                obj.RodhubHighlight:Destroy()
            end
        end
    end
end

task.spawn(function()
    while task.wait(1) do
        if getgenv().AutoHide and workspace:FindFirstChild("CurrentRooms") and Player.Character then
            local closest
            local minDist = math.huge
            for _, obj in pairs(workspace:GetDescendants()) do
                if obj.Name:find("Closet") and obj:FindFirstChild("Enter") then
                    local dist = (Player.Character.HumanoidRootPart.Position - obj.Enter.Position).Magnitude
                    if dist < minDist then
                        closest = obj
                        minDist = dist
                    end
                end
            end
            if closest and minDist < 15 then
                fireproximityprompt(closest.Enter)
            end
        end
    end
end)

game:GetService("Players").PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(char)
        if getgenv().BlueESP then
            AddHighlight(char, 0.5)
        end
    end)
end)

workspace.ChildAdded:Connect(function(child)
    if child.Name == "CurrentRooms" and getgenv().DoorsBlueESP then
        task.wait(2)
        HighlightDoorsObjects()
    end
end)

local StatusBar = Library:CreateStatusBar()
StatusBar:SetText("状态: 已激活 | 延迟: "..game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString().."ms")

RunService.Heartbeat:Connect(function()
    StatusBar:SetText("状态: 已激活 | 延迟: "..game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString().."ms")
end)

Library:Notify({
    Title = "Rodhub 加载成功",
    Content = "蓝色ESP系统已就绪",
    Duration = 5
})

task.spawn(function()
    task.wait(3)
    if getgenv().BlueESP then EnableBlueESP() end
    if getgenv().DoorsBlueESP then HighlightDoorsObjects() end
end)local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")

local Window = Library.CreateLib("Rodhub ┃ "..Player.Name.." ┃ v3.2", {
    Theme = "Dark",
    Accent = Color3.fromRGB(255, 65, 65),
    Size = UDim2.new(0, 650, 0, 550)
})

local Tabs = {
    Main = Window:NewTab("🏠 主页"),
    Player = Window:NewTab("👤 玩家"),
    Combat = Window:NewTab("⚔️ 战斗"),
    Visuals = Window:NewTab("👁️ 视觉"),
    Doors = Window:NewTab("🚪 DOORS"),
    Settings = Window:NewTab("⚙️ 设置")
}

local HighlightColor = Color3.fromRGB(0, 150, 255)
local ESPObjects = {}

local MainSection = Tabs.Main:NewSection("🔧 核心功能")
local GodModeToggle = MainSection:NewToggle("上帝模式", "免疫所有伤害", function(state)
    if state then
        Player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
    else
        Player.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, true)
    end
end)

local InfJumpToggle = MainSection:NewToggle("无限跳���", "取消跳跃冷却", function(state)
    getgenv().InfJump = state
end)

local WalkSpeedSlider = MainSection:NewSlider("移动速度", "调整行走速度", 200, 16, function(value)
    Player.Character.Humanoid.WalkSpeed = value
end)

local MovementSection = Tabs.Player:NewSection("🏃 移动增强")
local FlyToggle = MovementSection:NewToggle("飞行模式", "按住F键飞行", function(state)
    getgenv().Flying = state
    if state then
        FLY()
    end
end):AddKeybind(Enum.KeyCode.F)

local NoClipToggle = MovementSection:NewToggle("穿墙模式", "穿透所有物体", function(state)
    getgenv().NoClip = state
    if state then
        Player.Character.Humanoid:ChangeState(11)
    end
end):AddKeybind(Enum.KeyCode.N)

local VisualsESP = Tabs.Visuals:NewSection("🔵 蓝色ESP系统")
local ESPToggle = VisualsESP:NewToggle("启用蓝色ESP", "高亮所有重要对象", function(state)
    getgenv().BlueESP = state
    if state then
        EnableBlueESP()
    else
        DisableBlueESP()
    end
end)

local DoorsSurvival = Tabs.Doors:NewSection("🛡️ 生存系统")
local AutoHideToggle = DoorsSurvival:NewToggle("自动躲柜", "危险时自动寻找柜子", function(state)
    getgenv().AutoHide = state
end)

local DoorsESPToggle = Tabs.Doors:NewSection("🔵 DOORS ESP")
local DoorsHighlightToggle = DoorsESPToggle:NewToggle("高亮门和柜子", "蓝色高亮重要物体", function(state)
    getgenv().DoorsBlueESP = state
    if state then
        HighlightDoorsObjects()
    else
        RemoveDoorsHighlights()
    end
end)

function FLY()
    local CONTROLS = {F = 0, B = 0, L = 0, R = 0}
    local SPEED = 50

    local BG = Instance.new("BodyGyro")
    local BV = Instance.new("BodyVelocity")
    BG.P = 9e4
    BG.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    BG.cframe = Player.Character.HumanoidRootPart.CFrame
    BV.velocity = Vector3.new(0, 0, 0)
    BV.maxForce = Vector3.new(9e9, 9e9, 9e9)
    BG.Parent = Player.Character.HumanoidRootPart
    BV.Parent = Player.Character.HumanoidRootPart
    
    task.spawn(function()
        repeat task.wait()
            if CONTROLS.L + CONTROLS.R ~= 0 or CONTROLS.F + CONTROLS.B ~= 0 then
                SPEED = 50
            else
                SPEED = 0
            end
            
            BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROLS.F + CONTROLS.B)) + 
                          ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROLS.L + CONTROLS.R, (CONTROLS.F + CONTROLS.B) * 0.2, 0).p - 
                          workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
        until not getgenv().Flying
        BG:Destroy()
        BV:Destroy()
    end)
end

RunService.Stepped:Connect(function()
    if getgenv().NoClip and Player.Character then
        for _, part in pairs(Player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

game:GetService("UserInputService").JumpRequest:Connect(function()
    if getgenv().InfJump and Player.Character then
        Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

function EnableBlueESP()
    for _, player in pairs(game:GetService("Players"):GetPlayers()) do
        if player ~= Player then
            player.CharacterAdded:Connect(function(char)
                if getgenv().BlueESP then
                    AddHighlight(char, 0.5)
                end
            end)
            if player.Character then
                AddHighlight(player.Character, 0.5)
            end
        end
    end
    
    for _, item in pairs(workspace:GetDescendants()) do
        if item:IsA("BasePart") and (item.Name:find("Door") or item.Name:find("Chest") or item.Name:find("Item")) then
            AddHighlight(item, 0.3)
        end
    end
end

function HighlightDoorsObjects()
    if not workspace:FindFirstChild("CurrentRooms") then return end
    
    for _, room in pairs(workspace.CurrentRooms:GetChildren()) do
        if room:FindFirstChild("Door") then
            AddHighlight(room.Door, 0.2)
        end
        
        for _, obj in pairs(room:GetDescendants()) do
            if obj.Name:find("Closet") then
                AddHighlight(obj, 0.4)
            end
        end
        
        if room:FindFirstChild("Assets") then
            for _, entity in pairs(room.Assets:GetChildren()) do
                if entity:FindFirstChild("Humanoid") then
                    AddHighlight(entity, 0)
                end
            end
        end
    end
end

function AddHighlight(obj, transparency)
    if not obj or not obj:IsA("BasePart") then return end
    
    if obj:FindFirstChild("RodhubHighlight") then
        obj.RodhubHighlight:Destroy()
    end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "RodhubHighlight"
    highlight.FillColor = HighlightColor
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.FillTransparency = transparency
    highlight.Parent = obj
    
    table.insert(ESPObjects, highlight)
end

function DisableBlueESP()
    for _, obj in pairs(ESPObjects) do
        if obj and obj.Parent then
            obj:Destroy()
        end
    end
    ESPObjects = {}
end

function RemoveDoorsHighlights()
    if not workspace:FindFirstChild("CurrentRooms") then return end
    
    for _, room in pairs(workspace.CurrentRooms:GetChildren()) do
        if room:FindFirstChild("Door") and room.Door:FindFirstChild("RodhubHighlight") then
            room.Door.RodhubHighlight:Destroy()
        end
        
        for _, obj in pairs(room:GetDescendants()) do
            if obj:FindFirstChild("RodhubHighlight") then
                obj.RodhubHighlight:Destroy()
            end
        end
    end
end

task.spawn(function()
    while task.wait(1) do
        if getgenv().AutoHide and workspace:FindFirstChild("CurrentRooms") and Player.Character then
            local closest
            local minDist = math.huge
            for _, obj in pairs(workspace:GetDescendants()) do
                if obj.Name:find("Closet") and obj:FindFirstChild("Enter") then
                    local dist = (Player.Character.HumanoidRootPart.Position - obj.Enter.Position).Magnitude
                    if dist < minDist then
                        closest = obj
                        minDist = dist
                    end
                end
            end
            if closest and minDist < 15 then
                fireproximityprompt(closest.Enter)
            end
        end
    end
end)

game:GetService("Players").PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(char)
        if getgenv().BlueESP then
            AddHighlight(char, 0.5)
        end
    end)
end)

workspace.ChildAdded:Connect(function(child)
    if child.Name == "CurrentRooms" and getgenv().DoorsBlueESP then
        task.wait(2)
        HighlightDoorsObjects()
    end
end)

local StatusBar = Library:CreateStatusBar()
StatusBar:SetText("状态: 已激活 | 延迟: "..game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString().."ms")

RunService.Heartbeat:Connect(function()
    StatusBar:SetText("状态: 已激活 | 延迟: "..game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValueString().."ms")
end)

Library:Notify({
    Title = "Rodhub 加载成功",
    Content = "蓝色ESP系统已就绪",
    Duration = 5
})

task.spawn(function()
    task.wait(3)
    if getgenv().BlueESP then EnableBlueESP() end
    if getgenv().DoorsBlueESP then HighlightDoorsObjects() end
end)
